# Database Internals: Chapter 8 - Distributed Systems

## Part 2: Distributed Systems

Most modern database systems have multiple nodes connected in clusters to:

- Increase storage capacity
- Improve performance
- Enhance reliability of the data

## Key Components

In a distributed system, we have several participants, also known as processes or replicas:

- Each participant has its own local state
- Participants communicate by exchanging messages using communication links
- Processes can access time using clocks, which can be either:
  - **Logical clocks**: Implemented using monotonically growing counters
  - **Physical clocks**: Also called wall clocks, bound to a notion of time in the physical world and accessible through process-local means

## Distributed System Purposes

Distributed systems serve many different purposes:

1. **Coordination**: A process that supervises the actions and behavior of several workers
2. **Cooperation**: All participants relying on one another for finishing their tasks
3. **Dissemination**: Processes cooperating in spreading information to all interested parties quickly and reliably
4. **Consensus**: Important when multiple executions can affect a variable, making the exact outcome of concurrent execution unpredictable

## Challenges in Distributed Systems

In an ideal case, when two computers talk over a network, everything works perfectly:

- A process opens a connection
- Communication proceeds as expected

However, assuming operations always succeed and nothing can go wrong is dangerous. When systems break:

- Network switches fail
- Cables get disconnected
- Network configurations can change at any time

We should build systems that handle all these scenarios gracefully.

## Consistency Considerations

Distributed algorithms do not always guarantee strict state consistency:

- Some approaches prioritize real-time data
- Systems may assume the state is fully consistent across the network
- Particular challenges arise when two or more servers cannot communicate

# データベース内部構造：第8章 - 分散システム

## パート2：分散システム

現代のほとんどのデータベースシステムは、複数のノードがクラスターとして接続されており、以下を実現しています：

- ストレージ容量の増加
- パフォーマンスの向上
- データの信頼性の強化

## 主要コンポーネント

分散システムでは、プロセスやレプリカとも呼ばれる複数の参加者が存在します：

- 各参加者は独自のローカル状態を持っています
- 参加者は通信リンクを使用してメッセージを交換することでコミュニケーションを行います
- プロセスは以下のいずれかの時計を使用して時間にアクセスできます：
  - **論理時計**：単調に増加するカウンターを使用して実装されます
  - **物理時計**：ウォールクロックとも呼ばれ、物理世界の時間の概念に結びつけられており、プロセスのローカルな手段でアクセス可能です

## 分散システムの目的

分散システムは多くの異なる目的に役立ちます：

1. **調整**：複数のワーカーの行動や振る舞いを監督するプロセス
2. **協力**：すべての参加者がタスクを完了するために互いに依存している状態
3. **普及**：すべての関係者に情報を迅速かつ確実に広めるために協力するプロセス
4. **合意形成**：複数の実行が変数に影響を与える可能性がある場合に重要であり、並行実行の正確な結果が予測不可能になります

## 分散システムの課題

理想的なケースでは、2台のコンピュータがネットワーク上で通信する際、すべてが完璧に動作します：

- プロセスが接続を開きます
- 通信は予想通りに進みます

しかし、操作が常に成功し、何も問題が起きないと想定することは危険です。システムが壊れると：

- ネットワークスイッチが故障します
- ケーブルが切断されます
- ネットワーク構成はいつでも変更される可能性があります

これらのシナリオをすべて適切に処理するシステムを構築すべきです。

## 一貫性に関する考慮事項

分散アルゴリズムは常に厳密な状態の一貫性を保証するわけではありません：

- いくつかのアプローチはリアルタイムデータを優先します
- システムはネットワーク全体で状態が完全に一貫していると想定する場合があります
- 2台以上のサーバーが通信できない場合に特に課題が生じます
